{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2a1000e8_d5e4c552",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDBMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "```suggestion\n                    \"Number of failures when attempting to perform an operation on global-refdb.\")\n```",
      "range": {
        "startLine": 86,
        "startChar": 90,
        "endLine": 86,
        "endChar": 96
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "976c51e5_3e137069",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDBMetrics.java",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a1000e8_d5e4c552",
      "range": {
        "startLine": 86,
        "startChar": 90,
        "endLine": 86,
        "endChar": 96
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "439edf4d_d88da464",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 74,
        "startChar": 13,
        "endLine": 74,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b4332c9_29db2522",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "439edf4d_d88da464",
      "range": {
        "startLine": 74,
        "startChar": 13,
        "endLine": 74,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c0a40cf_034d42af",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-05T08:42:30Z",
      "side": 1,
      "message": "Also, catching `Exception` wouldn\u0027t solve the issue, as it may throw another runtime exception.\n\nWe don\u0027t really care about catching the exception, isn\u0027t it? Why don\u0027t we just increment the metric in the finally block if the method didn\u0027t return normally?",
      "parentUuid": "9b4332c9_29db2522",
      "range": {
        "startLine": 74,
        "startChar": 13,
        "endLine": 74,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b94b888_e9a711ae",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T09:08:32Z",
      "side": 1,
      "message": "My understanding is that not every runtime exception necessarily indicates a failure of the global-refdb operation.\n\nFor example, the write operation to global-refdb might succeed, but a subsequent NPE (or another unrelated error) could still occur due to an implementation-specific issue.\n\nHowever, if we want this metric to represent _any_ error risen by implementation, then yes your comment makes sense.\n\nLet me rework it.",
      "parentUuid": "0c0a40cf_034d42af",
      "range": {
        "startLine": 74,
        "startChar": 13,
        "endLine": 74,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb8b850c_14d447fc",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T11:33:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b94b888_e9a711ae",
      "range": {
        "startLine": 74,
        "startChar": 13,
        "endLine": 74,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1aa9a55a_b4b95fd7",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-05T14:13:10Z",
      "side": 1,
      "message": "\u003e For example, the write operation to global-refdb might succeed, but a subsequent NPE (or another unrelated error) could still occur due to an implementation-specific issue.\n\nYes, that\u0027s a possibility; however, I believe the Gerrit admin should be notified that something isn\u0027t quite right and have an alert raised anyway.",
      "parentUuid": "eb8b850c_14d447fc",
      "range": {
        "startLine": 74,
        "startChar": 13,
        "endLine": 74,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37feef52_80ba229d",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-05T08:49:50Z",
      "side": 1,
      "message": "```suggestion\n    Optional\u003cBoolean\u003e upToDate \u003d Optional.empty();\n    try (Context context \u003d metrics.startIsUpToDateExecutionTime()) {\n      upToDate \u003d Optional.of(sharedRefDb().isUpToDate(project, ref));\n      return upToDate.get();\n    } finally {\n      upToDate.ifPresentOrElse(Runnables.doNothing(), () -\u003e metrics.incrementOperationFailures());\n    }\n```",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7a15af7_1d4bf2c8",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T11:33:36Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "37feef52_80ba229d",
      "range": {
        "startLine": 72,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c140f66_bfa8e435",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 90,
        "startChar": 13,
        "endLine": 90,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d05c53a5_23f0469e",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "7c140f66_bfa8e435",
      "range": {
        "startLine": 90,
        "startChar": 13,
        "endLine": 90,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "264a9ee8_a98f682a",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 106,
        "startChar": 13,
        "endLine": 106,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e29290e2_0d372933",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "264a9ee8_a98f682a",
      "range": {
        "startLine": 106,
        "startChar": 13,
        "endLine": 106,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a6862f6_0f3ba39b",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 122,
        "startChar": 13,
        "endLine": 122,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "251d7752_12266bbc",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "4a6862f6_0f3ba39b",
      "range": {
        "startLine": 122,
        "startChar": 13,
        "endLine": 122,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f870b9c_a6cb247d",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 140,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 140,
        "startChar": 13,
        "endLine": 140,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b644970d_f070315a",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 140,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "0f870b9c_a6cb247d",
      "range": {
        "startLine": 140,
        "startChar": 13,
        "endLine": 140,
        "endChar": 37
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1518a4da_b3befc99",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 159,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 159,
        "startChar": 13,
        "endLine": 159,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e090b17_fe6d3026",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 159,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "1518a4da_b3befc99",
      "range": {
        "startLine": 159,
        "startChar": 13,
        "endLine": 159,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdbfde1c_3695d4fb",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-03-04T22:17:24Z",
      "side": 1,
      "message": "What if the operation throws another unchecked exception?",
      "range": {
        "startLine": 170,
        "startChar": 13,
        "endLine": 170,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef2bfb36_a22631e1",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDatabaseWrapper.java",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-03-05T07:58:03Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "cdbfde1c_3695d4fb",
      "range": {
        "startLine": 170,
        "startChar": 13,
        "endLine": 170,
        "endChar": 35
      },
      "revId": "c186bbe8205e7430ae3fed569f10d2c2929938eb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}